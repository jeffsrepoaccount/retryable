/*! retryable 18-07-2014 */
!function(a){function b(a,b,c,d){function e(a){return m.callback=a,m}function f(a){return m.success=a,m}function g(){j()}function h(){return m.variance=!0,m}function i(a){return m.maxTries=a,m}function j(){m.count++;var a=k(m.count),b=m.callback(m.count,a);return b||(!m.maxTries||m.count<m.maxTries)&&setTimeout(function(){m.lastResult=j()},a),m.success&&m.success(b),b}function k(c){c=c||0;var d=Math.log(a),e=Math.log(b),f=(e-d)/(b-a),g=1e3*parseInt(Math.exp(d+f*c));return g+=l(f),1e3*b>g?g:b}function l(){return m.variance?(Math.random()<.5?-1:1)*Math.ceil(a*Math.random())*1e3:0}var m=this;return m.count=0,m.maxTries=0,m.variance=!1,m.lastResult=!1,m.callback=c,m.success=d,m.call=e,m.then=f,m.begin=g,m.withVariance=h,m.max=i,m}a.Retryable=b}(window);